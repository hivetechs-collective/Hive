/* Auto-Accept Control Bar Styles */

.auto-accept-control-bar {
    background: #1e1e1e;
    border-top: 1px solid #333;
    padding: 8px 16px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    font-size: 13px;
    color: #e0e0e0;
    box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.2);
}

/* Main control section */
.control-main {
    display: flex;
    align-items: center;
    gap: 16px;
    min-height: 36px;
}

/* Mode selector */
.mode-selector {
    position: relative;
    flex: 0 0 auto;
}

.current-mode {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 12px;
    background: #2a2a2a;
    border: 1px solid #444;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.current-mode:hover {
    background: #333;
    border-color: #555;
}

.mode-icon {
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

.mode-icon.icon-shield {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234CAF50"><path d="M12 2L4 7v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V7l-8-5z"/></svg>');
}

.mode-icon.icon-balance {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%232196F3"><path d="M12 2l-8 4v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4zm0 10l3 3-3 3-3-3 3-3z"/></svg>');
}

.mode-icon.icon-rocket {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FF9800"><path d="M12 2c-.5 0-1 .19-1.41.59l-8 8c-.79.78-.79 2.04 0 2.82l8 8c.78.79 2.04.79 2.82 0l8-8c.79-.78.79-2.04 0-2.82l-8-8C13 2.19 12.5 2 12 2z"/></svg>');
}

.mode-icon.icon-plan {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%239C27B0"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/></svg>');
}

.mode-icon.icon-hand {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23607D8B"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>');
}

.mode-label {
    font-weight: 500;
}

.confidence-indicator {
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    color: #fff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.expand-arrow {
    font-size: 10px;
    opacity: 0.6;
    transition: transform 0.2s ease;
}

.expand-arrow.expanded {
    transform: rotate(180deg);
}

/* Mode options dropdown */
.mode-options {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 4px;
    background: #2a2a2a;
    border: 1px solid #444;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    min-width: 280px;
    z-index: 1000;
    overflow: hidden;
}

.mode-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    cursor: pointer;
    transition: background 0.15s ease;
    position: relative;
}

.mode-option:hover {
    background: #333;
}

.mode-option.current {
    background: #2d3748;
}

.mode-option .mode-icon {
    flex-shrink: 0;
}

.mode-info {
    flex: 1;
}

.mode-name {
    font-weight: 600;
    margin-bottom: 2px;
}

.mode-description {
    font-size: 11px;
    color: #999;
    margin-bottom: 2px;
}

.mode-thresholds {
    font-size: 10px;
    color: #666;
    font-family: monospace;
}

.current-indicator {
    position: absolute;
    right: 16px;
    color: #4CAF50;
    font-size: 16px;
}

/* AI insights section */
.ai-insights {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 0 16px;
}

.risk-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
}

.risk-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    position: relative;
}

.risk-icon::before {
    content: '!';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
    font-size: 12px;
    color: #fff;
}

.risk-icon.risk-low {
    background: #4CAF50;
}

.risk-icon.risk-medium-low {
    background: #8BC34A;
}

.risk-icon.risk-medium {
    background: #FFC107;
}

.risk-icon.risk-high {
    background: #FF9800;
}

.risk-icon.risk-critical {
    background: #F44336;
}

.risk-label {
    font-size: 12px;
    font-weight: 500;
}

.primary-recommendation {
    flex: 1;
    overflow: hidden;
}

.recommendation-text {
    font-size: 12px;
    color: #bbb;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.decision-indicator {
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
}

.decision-auto {
    background: #4CAF50;
    color: #fff;
}

.decision-confirm {
    background: #FFC107;
    color: #333;
}

.decision-block {
    background: #F44336;
    color: #fff;
}

/* Quick stats */
.quick-stats {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 6px 12px;
    background: #2a2a2a;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s ease;
}

.quick-stats:hover {
    background: #333;
}

.stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.stat-value {
    font-size: 14px;
    font-weight: 600;
}

.stat-label {
    font-size: 10px;
    color: #999;
    text-transform: uppercase;
}

.history-arrow {
    font-size: 10px;
    opacity: 0.6;
    transition: transform 0.2s ease;
    margin-left: 8px;
}

.history-arrow.expanded {
    transform: rotate(180deg);
}

/* Keyboard hint */
.keyboard-hint {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px 8px;
    background: #333;
    border-radius: 4px;
    font-size: 11px;
    font-family: monospace;
    color: #888;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.keyboard-hint:hover {
    opacity: 1;
}

/* AI Insights Panel */
.ai-insights-panel {
    background: #252525;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 16px;
    margin-top: 8px;
    max-height: 400px;
    overflow-y: auto;
}

.score-section,
.recommendations-section,
.decision-section {
    margin-bottom: 20px;
}

.score-section h4,
.recommendations-section h4,
.decision-section h4 {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: #e0e0e0;
}

.score-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
}

.score-label {
    flex: 0 0 80px;
    font-size: 12px;
    color: #999;
}

.score-track {
    flex: 1;
    height: 8px;
    background: #333;
    border-radius: 4px;
    overflow: hidden;
}

.score-fill {
    height: 100%;
    transition: width 0.3s ease;
}

.score-value {
    flex: 0 0 40px;
    text-align: right;
    font-size: 12px;
    font-weight: 500;
}

.component-scores {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #333;
}

.component-scores h5 {
    margin: 0 0 8px 0;
    font-size: 12px;
    font-weight: 500;
    color: #999;
}

.component-score {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-right: 16px;
    margin-bottom: 4px;
    font-size: 11px;
}

.comp-label {
    color: #777;
}

.comp-value {
    font-weight: 500;
    color: #bbb;
}

.comp-value.none {
    color: #666;
}

/* Recommendation cards */
.recommendation-card {
    background: #2a2a2a;
    border: 1px solid #3a3a3a;
    border-radius: 6px;
    padding: 12px;
    margin-bottom: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.recommendation-card:hover {
    background: #333;
    border-color: #444;
}

.recommendation-card.priority-High {
    border-left: 3px solid #F44336;
}

.recommendation-card.priority-Medium {
    border-left: 3px solid #FFC107;
}

.recommendation-card.priority-Low {
    border-left: 3px solid #4CAF50;
}

.rec-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
}

.rec-action {
    font-weight: 600;
    font-size: 13px;
}

.rec-confidence {
    font-size: 11px;
    color: #999;
}

.rec-description {
    font-size: 12px;
    color: #bbb;
    line-height: 1.4;
}

.rec-details {
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid #333;
}

.rec-rationale,
.rec-risks {
    margin-bottom: 12px;
}

.rec-rationale h6,
.rec-risks h6 {
    margin: 0 0 6px 0;
    font-size: 11px;
    font-weight: 600;
    color: #999;
    text-transform: uppercase;
}

.rationale-item,
.risk-item {
    font-size: 11px;
    color: #888;
    margin-bottom: 4px;
    padding-left: 8px;
}

.rec-feedback {
    display: flex;
    gap: 8px;
    margin-top: 12px;
}

.feedback-btn {
    padding: 4px 12px;
    border: 1px solid #333;
    background: #2a2a2a;
    border-radius: 4px;
    font-size: 11px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.feedback-btn:hover {
    background: #333;
    border-color: #444;
}

.feedback-btn.helpful:hover {
    background: #2e4a2e;
    border-color: #4CAF50;
}

.feedback-btn.not-helpful:hover {
    background: #4a2e2e;
    border-color: #F44336;
}

/* Decision explanation */
.decision-explanation {
    background: #2a2a2a;
    border-radius: 6px;
    padding: 12px;
}

.decision-explanation.auto-execute {
    border-left: 3px solid #4CAF50;
}

.decision-explanation.require-confirmation {
    border-left: 3px solid #FFC107;
}

.decision-explanation.block {
    border-left: 3px solid #F44336;
}

.decision-type {
    font-weight: 600;
    font-size: 13px;
    margin-bottom: 4px;
}

.decision-reason {
    font-size: 12px;
    color: #bbb;
    margin-bottom: 8px;
}

.decision-stats {
    font-size: 11px;
    color: #888;
    font-family: monospace;
}

.decision-warnings,
.decision-suggestions,
.decision-critical,
.decision-alternatives {
    margin-top: 12px;
}

.decision-warnings h5,
.decision-suggestions h5,
.decision-critical h5,
.decision-alternatives h5 {
    margin: 0 0 6px 0;
    font-size: 12px;
    font-weight: 500;
}

.warning-item,
.suggestion-item,
.critical-item,
.alternative-item {
    font-size: 11px;
    color: #999;
    margin-bottom: 4px;
    padding-left: 8px;
}

/* Operation history panel */
.operation-history-panel {
    background: #252525;
    border: 1px solid #333;
    border-radius: 8px;
    padding: 16px;
    margin-top: 8px;
    max-height: 400px;
    overflow-y: auto;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
    margin-bottom: 20px;
}

.stat-card {
    background: #2a2a2a;
    border: 1px solid #333;
    border-radius: 6px;
    padding: 12px;
    text-align: center;
}

.stat-title {
    font-size: 11px;
    color: #999;
    text-transform: uppercase;
    margin-bottom: 4px;
}

.stat-main-value {
    font-size: 20px;
    font-weight: 600;
    color: #e0e0e0;
    margin-bottom: 2px;
}

.stat-subtext {
    font-size: 11px;
    color: #666;
}

.operation-breakdown,
.mode-usage {
    margin-bottom: 20px;
}

.operation-breakdown h5,
.mode-usage h5 {
    margin: 0 0 12px 0;
    font-size: 12px;
    font-weight: 500;
    color: #999;
    text-transform: uppercase;
}

.operation-type-stat,
.mode-usage-stat {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.op-type,
.mode-name {
    flex: 0 0 100px;
    font-size: 12px;
    color: #bbb;
}

.op-count,
.mode-count {
    flex: 0 0 40px;
    text-align: right;
    font-size: 12px;
    color: #888;
}

.op-bar,
.mode-bar {
    flex: 1;
    height: 8px;
    background: #4CAF50;
    border-radius: 4px;
    opacity: 0.7;
}

/* No data states */
.no-analysis,
.no-stats {
    text-align: center;
    color: #666;
    padding: 40px;
    font-size: 13px;
}

/* Scrollbar styling */
.ai-insights-panel::-webkit-scrollbar,
.operation-history-panel::-webkit-scrollbar {
    width: 8px;
}

.ai-insights-panel::-webkit-scrollbar-track,
.operation-history-panel::-webkit-scrollbar-track {
    background: #1e1e1e;
    border-radius: 4px;
}

.ai-insights-panel::-webkit-scrollbar-thumb,
.operation-history-panel::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 4px;
}

.ai-insights-panel::-webkit-scrollbar-thumb:hover,
.operation-history-panel::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .control-main {
        flex-wrap: wrap;
    }
    
    .ai-insights {
        flex: 1 1 100%;
        order: 2;
        margin-top: 8px;
    }
    
    .quick-stats {
        display: none;
    }
}

/* Animation for mode transitions */
@keyframes modeChange {
    0% {
        transform: scale(0.95);
        opacity: 0.7;
    }
    50% {
        transform: scale(1.02);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.current-mode {
    animation: modeChange 0.3s ease;
}